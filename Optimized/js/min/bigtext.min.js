(function(g,d){function s(a,b,d,f,l,e,k){k="number"===typeof k?k:0;a.css(d,f+e);e=a.width();if(e>=b){a.css(d,"");if(e===b)return{match:"exact",size:parseFloat((parseFloat(f)-.1).toFixed(3))};a=b-k;b=e-b;return{match:"estimate",size:parseFloat((parseFloat(f)-("word-spacing"===d&&k&&b<a?0:l)).toFixed(3))}}return e}function t(a,c,n,f,l){a=a.clone(!0).addClass("bigtext-cloned").css({fontFamily:a.css("font-family"),textTransform:a.css("text-transform"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),
position:"absolute",left:b.DEBUG_MODE?0:-9999,top:b.DEBUG_MODE?0:-9999}).appendTo(document.body);var e=[],k=[],g=[],r=[];c.css("float","left").each(function(){var a=d(this),c=b.test.noFractionalFontSize?[8,4,1]:[8,4,1,.1],k,h;if(a.hasClass(b.EXEMPT_CLASS))e.push(null),r.push(null),g.push(!1);else{h=parseFloat(a.css("font-size"));h=(a.width()/h).toFixed(6);h=parseInt(n/h,10)-32;var m=0,q=c.length;a:for(;m<q;m++){var p=1;b:for(;10>=p;p++){if(h+p*c[m]>f){h=f;break a}k=s(a,n,"font-size",h+p*c[m],c[m],
"px",k);if("number"!==typeof k){h=k.size;if("exact"===k.match)break a;break b}}}r.push(n/h);h>f?(e.push(f),g.push(!1)):l&&h<l?(e.push(l),g.push(!0)):(e.push(h),g.push(!1))}}).each(function(a){var c=d(this),f=0,h;if(c.hasClass(b.EXEMPT_CLASS))k.push(null);else{c.css("font-size",e[a]+"px");for(a=1;3>a;a+=1)if(h=s(c,n,"word-spacing",a,1,"px",h),"number"!==typeof h){f=h.size;break}c.css("font-size","");k.push(f)}}).removeAttr("style");b.DEBUG_MODE?a.css({"background-color":"rgba(255,255,255,.4)"}):a.remove();
return{fontSizes:e,wordSpacings:k,ratios:r,minFontSizes:g}}var u=0,q=d("head"),v=g.BigText,w=d.fn.bigtext,b={DEBUG_MODE:!1,DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",noConflict:function(a){a&&(d.fn.bigtext=w,g.BigText=v);return b},test:{noFractionalFontSize:function(){if(!("getComputedStyle"in g&&"body"in document))return!0;var a=d("<div/>").css({position:"absolute",
"font-size":"14.1px"}).appendTo(document.body).get(0);return(a=g.getComputedStyle(a,null))?"14px"===a.getPropertyValue("font-size"):!0}()},init:function(){d("#"+b.GLOBAL_STYLE_ID).length||q.append(b.generateStyleTag(b.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; } .bigtext > * { display: block; }",".bigtext ."+b.EXEMPT_CLASS+", .bigtext ."+b.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(a,b){d.throttle?d(g).unbind(a).bind(a,d.throttle(100,b)):(d.fn.smartresize&&(a="smartresize."+
a),d(g).unbind(a).bind(a,b))},getStyleId:function(a){return b.STYLE_ID+"-"+a},generateStyleTag:function(a,b){return d("<style>"+b.join("\n")+"</style>").attr("id",a)},clearCss:function(a){a=b.getStyleId(a);d("#"+a).remove()},generateCss:function(a,c,d,f){var g=[];b.clearCss(a);for(var e=0,k=c.length;e<k;e++)g.push("#"+a+" ."+b.LINE_CLASS_PREFIX+e+" {"+(f[e]?" white-space: normal;":"")+(c[e]?" font-size: "+c[e]+"px;":"")+(d[e]?" word-spacing: "+d[e]+"px;":"")+"}");return b.generateStyleTag(b.getStyleId(a),
g)},jQueryMethod:function(a){b.init();a=d.extend({minfontsize:b.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:b.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},a||{});this.each(function(){var c=d(this).addClass("bigtext"),g=c.width(),f=c.attr("id"),l=a.childSelector?c.find(a.childSelector):c.children();f||(f="bigtext-id"+u++,c.attr("id",f));a.resize&&b.bindResize("resize.bigtext-event-"+f,function(){b.jQueryMethod.call(d("#"+f),a)});b.clearCss(f);l.addClass(function(a,c){return[c.replace(new RegExp("\\b"+
b.LINE_CLASS_PREFIX+"\\d+\\b"),""),b.LINE_CLASS_PREFIX+a].join(" ")});c=t(c,l,g,a.maxfontsize,a.minfontsize);q.append(b.generateCss(f,c.fontSizes,c.wordSpacings,c.minFontSizes))});return this.trigger("bigtext:complete")}};d.fn.bigtext=b.jQueryMethod;g.BigText=b})(this,jQuery);